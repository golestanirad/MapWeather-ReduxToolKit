(this["webpackJsonprtk-weather"]=this["webpackJsonprtk-weather"]||[]).push([[0],{109:function(e,t,r){e.exports=r(178)},118:function(e,t,r){},168:function(e,t,r){},171:function(e,t,r){},176:function(e,t,r){},178:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(14),i=r.n(o),c=r(9),s=(r(118),r(24)),u=(r(87),r(88),r(25),r(230),r(233),r(231),r(234),r(235),r(16),r(20)),l=r.n(u),d=(r(89),r(49)),p=r(13),f=r.n(p),h=r(23),m=r(34),b=r(26),v=r(65),g=r.n(v),x=r(36),_=r.n(x);r(162),r(164);_.a.initializeApp({apiKey:"AIzaSyCBn2ciVykGZ5jzImQj1qoPojQLYMMcXEI",authDomain:"map-weather-10531.firebaseapp.com",databaseURL:"https://map-weather-10531.firebaseio.com",projectId:"map-weather-10531",storageBucket:"map-weather-10531.appspot.com",messagingSenderId:"848134999340",appId:"1:848134999340:web:cebf58200aa623eebf7089",measurementId:"G-L04ENL8Z78"});new _.a.auth.GoogleAuthProvider;var y=_.a.auth(),w=_.a.firestore(),L=(_.a,function(e,t){try{var r="https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(t,"&appid=b3e4ac819a75b7e1ffe53d3d5701cc90&units=metric");return g.a.get(r)}catch(n){console.log("errrorrrrr",n)}}),F=function(e,t){try{var r="https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e,"&lon=").concat(t,"&appid=b3e4ac819a75b7e1ffe53d3d5701cc90&units=metric");return g.a.get(r)}catch(n){console.log("errrorrrrr",n)}},S=function(e){try{var t=w.collection("users").doc(e).collection("favorites").get();return console.log("promiseeeeeeee",t),t}catch(r){console.log("errorrrrrr",r)}},j=function(){var e=Object(h.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.map((function(e){var t=e.lat,r=e.lng;return{current:L(t,r),forecast:F(t,r)}})),e.next=4,Promise.all(r.map((function(e){var t=e.current,r=e.forecast;return Promise.all([t,r]).then((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1];return{current:r.data,forecast:n.data}}))})));case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(b.b)({name:"weather",initialState:{weatherLocations:{},favorites:[],visible:[],expanded:[],isLoading:!1,error:null},reducers:{getWeatherStart:function(e,t){e.isLoading=!0},getWeatherSuccess:function(e,t){e.weatherLocations=Object(m.a)(Object(m.a)({},t.payload),e.weatherLocations);var r=Object.keys(t.payload)[0];e.visible.includes(r)||e.visible.push(r),e.expanded.includes(r)||e.expanded.push(r),e.isLoading=!1,e.error=null},getWeatherFailure:function(e,t){e.isLoading=!1,e.error=t.payload},addToFavoriteListSuccess:function(e,t){e.favorites.push(t.payload),e.isLoading=!1},addToFavoriteListFailure:function(e,t){e.error=t.payload,e.isLoading=!1},removeFromFavoriteListSuccess:function(e,t){e.favorites=l.a.without(e.favorites,t.payload)},removeFromFavoriteListFailure:function(e,t){e.error=t.payload},deleteLocation:function(e,t){delete e.weatherLocations[t.payload]},initialFavoritesFetchStart:function(e,t){e.isLoading=!0},initialFavoritesFetchSuccess:function(e,t){e.isLoading=!1,e.weatherLocations=Object(m.a)(Object(m.a)({},e.weatherLocations),t.payload),e.favorites=Object.keys(t.payload),Object.keys(t.payload).map((function(t){e.visible.includes(t)||e.visible.push(t),e.expanded.includes(t)||e.expanded.push(t)}))},initialFavoritesFetchFailure:function(e,t){e.isLoading=!1,e.error=t.payload},addToVisibleLocations:function(e,t){e.visible.push(t.payload)},removeFromVisibleLocations:function(e,t){e.visible=l.a.without(e.visible,t.payload)},addToExpandedCards:function(e,t){e.expanded.push(t.payload)},removeFromExpandedCards:function(e,t){e.expanded=l.a.without(e.expanded,t.payload)},restWholeData:function(e){e.weatherLocations={},e.favorites=[],e.visible=[]}}}),O=k.actions,E=O.getWeatherStart,T=O.getWeatherSuccess,U=O.getWeatherFailure,I=(O.addToFavoriteListSuccess,O.addToFavoriteListFailure,O.removeFromFavoriteListSuccess,O.removeFromFavoriteListFailure,O.deleteLocation,O.initialFavoritesFetchStart),C=O.initialFavoritesFetchSuccess,W=O.initialFavoritesFetchFailure,z=(O.addToVisibleLocations,O.removeFromVisibleLocations,O.restWholeData,O.addToExpandedCards,O.removeFromExpandedCards,k.reducer),A=function(e,t){return function(){var r=Object(h.a)(f.a.mark((function r(n){var a,o,i,c;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(E()),r.next=4,Promise.all([L(e,t),F(e,t)]);case 4:a=r.sent,o=a[0].data,i=a[1].data,c=P(o,i),n(T(c)),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("getWeather errorrrrrrr",r.t0),n(U(r.t0));case 15:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()},P=function(e,t){var r=t.city,n=t.list,a=e.main,o=e.weather,i=e.dt,c=e.coord;return Object(d.a)({},r.name+" - "+r.country,{timezone:r.timezone,locationName:r.name+" - "+r.country,coord:{lat:c.lat,lng:c.lon},current:{temp:a.temp,icon:o[0].icon,dt:i,description:o[0].description},forecast:n.map((function(e){var t=e.main,r=e.weather,n=e.dt;return{temp:t.temp,icon:r[0].icon,dt:n,description:r[0].description}}))})},D=Object(b.b)({name:"map",initialState:{currentLocation:{lat:49.2827,lng:-123.1207}},reducers:{currentLocation:function(e,t){e.currentLocation=t.payload}}}),V=D.actions.currentLocation,K=D.reducer,M=(r(90),r(215),r(168),r(91),r(92),r(229),r(32),r(59),r(93),r(171),r(66),r(216)),R=(r(220),r(221),r(223),r(218),r(222),r(179),Object(M.a)({table:{},row:{border:"2px solid gray"},cell:{maxWidth:"35px",padding:"6px"},insideCell:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontWeight:"bold",fontSize:"10px",margin:"2px"},day:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",fontSize:"15px",fontWeight:"bold",borderRadius:"10px",width:"37px",padding:"0 2px"},icon:{backgroundColor:"gray"}}),r(228),r(232),r(227),r(225),r(226),r(224),r(94),r(67),r(95),r(68),r(56)),B=r(43),N=r(57),G=r.n(N);function J(){var e=Object(R.a)(["\n  display: block;\n  margin: 5px auto;\n  border-color: red;\n"]);return J=function(){return e},e}Object(B.css)(J()),r(97),r(60),r(176);var Q=Object(b.b)({name:"user",initialState:{userInfo:{name:null,email:null,uid:null},isLoading:!1,error:null},reducers:{checkUserStatusStart:function(e,t){e.isLoading=!0},checkUserStatusSuccess:function(e,t){var r=t.payload,n=r.name,a=r.email,o=r.uid;e.userInfo={name:n,email:a,uid:o},e.isLoading=!1},checkUserStatusFailure:function(e,t){e.isLoading=!1,e.error=t.payload},loginUserStart:function(e,t){e.isLoading=!0},loginUserSuccess:function(e,t){e.isLoading=!1},loginUserFailure:function(e,t){e.isLoading=!1,e.error=t.payload}}}),X=Q.actions,Y=X.checkUserStatusStart,Z=X.checkUserStatusSuccess,q=X.checkUserStatusFailure,H=(X.loginUserFailure,X.loginUserStart,X.loginUserSuccess,Q.reducer),$=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.user.userInfo.uid}));return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(t){var r=t.coords,n=r.latitude,a=r.longitude;e(V({lat:n,lng:a})),e(A(n,a))}))}),[]),Object(n.useEffect)((function(){var t=y.onAuthStateChanged((function(t){e(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r(Y()),e){t.next=5;break}return r(Z({name:null,email:null,uid:null})),t.abrupt("return");case 5:if((n=w.collection("users").doc(e.uid)).exists){t.next=9;break}return t.next=9,n.set({name:e.displayName,email:e.email,uid:e.uid});case 9:r(Z({name:e.displayName,email:e.email,uid:e.uid})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("error at login userrrrrrrr",t.t0),r(q(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(t))}));return function(){t()}}),[]),Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(r){var n,a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=14;break}return r(I()),n=[],t.next=6,S(e);case 6:return t.sent.forEach((function(e){n.push(e.data())})),t.next=10,j(n);case 10:(a=t.sent).length>0&&(o={},a.forEach((function(e){var t=e.current,r=e.forecast,n=P(t,r);Object.assign(o,n)})),r(C(o))),t.next=14;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),console.log("initialFavoritesFetch errorrrrrrr",t.t0),r(W(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]),a.a.createElement("div",null,":)")},ee=r(98),te=r(99),re=r(101),ne=r(100);function ae(){var e=Object(R.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red; \n"]);return ae=function(){return e},e}var oe=Object(B.css)(ae()),ie=(a.a.Component,r(22)),ce=Object(ie.c)({weather:z,map:K,user:H}),se=Object(b.a)({reducer:ce});r(177);i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:se},a.a.createElement($,null))),document.getElementById("root"))},32:function(e,t,r){e.exports={container:"weather-card_container__3JHUV",bar:"weather-card_bar__6RXbt",icon:"weather-card_icon__1vPvu",name:"weather-card_name__Fb8bt"}},59:function(e,t,r){e.exports={container:"current-weather_container__wKpuE",iconAnddTemp:"current-weather_iconAnddTemp__3K77A",icon:"current-weather_icon__BM6wD"}},60:function(e,t,r){},66:function(e,t,r){e.exports={container:"forecast-card_container__1qZsT",icon:"forecast-card_icon__-TpST"}},67:function(e,t,r){e.exports={container:"Search-Tab_container__2o8sR",list:"Search-Tab_list__205Im"}},68:function(e,t,r){e.exports={container:"search-box_container__2vE2e",algolia:"search-box_algolia__2XrLe"}},87:function(e,t,r){e.exports={container:"home_container__17Yf0"}},89:function(e,t,r){e.exports={container:"Map_container__2covr"}},91:function(e,t,r){e.exports={text:"heart-icon_text__Rz5Uj"}},92:function(e,t,r){e.exports={text:"circle-icon_text__1K2zY"}},94:function(e,t,r){e.exports={container:"weather-card-list_container__1KhbA"}},97:function(e,t,r){e.exports={container:"favorite-tab_container__1Q--y"}}},[[109,1,2]]]);
//# sourceMappingURL=main.50275e62.chunk.js.map